const API = {
    getTimeNow : ()=>{
        var now = new Date();
        return now.getTime();
    },

    sleep_: (time) => {
        var timer;
        var pro = new Promise((resolve) => { timer = setTimeout(resolve, time) });
        return [timer, pro];
    },
    sleep: async (time) => {
        var [timer, pro] = API.sleep_(time);
        // console.log(timer, pro)
        await pro.then(() => clearTimeout(timer))
    },
    clearAllSleep: () => {
        var end = setTimeout(function () { }, 10000);
        for (var i = 1; i <= end; i++) {
            clearTimeout(i);
        }
    },
    /* Chrome API Applied */
    getImgURL: (src) => {
        // transfer common url to extension link
        if (chrome?.runtime?.getURL) {
            return chrome.runtime.getURL(src)
        } else {
            return src
        }
    },

    action_list: [
        "stand", "walk", "run", "rush", // 站立
        "sit", "sit_lookup", "sit_sleepy", "sit_glad", "sit_foot", "sit_foot2", // 坐
        "sleep", "sleep2", // 趴
        "ceiling_move" // 天花板
    ],
    action_list_wall: ["wall_stay", "wall_moveup", "wall_movedown"],// 墙壁

    sentence_list:["别乱戳人家啦！我正在思考一些魔法相关的问题呢。", 
        "我也正巧有点无聊呢。要玩什么呢？", 
        "我有很多好玩的魔法道具和魔法书，不知道你喜欢哪一种？", 
        "哦？怎么了？你有什么想和我说的吗？",
        "要看看我最近收集的魔法咒语书吗？",
        "好啦好啦，我也正好有点无聊。你想玩什么呢？",
        "别戳我脸啊，我在思考问题呢。"],

    action_gif: {// [[帧, 平移, 时长]]
        "stand": [[1, [0, 0], 150]],
        "walk": [
            [1, [-2, 0], 6],
            [2, [-2, 0], 6],
            [1, [-2, 0], 6],
            [3, [-2, 0], 6],
        ],
        "run": [
            [52, [-4, 0], 8],
            [50, [-4, 0], 4],
            [51, [-4, 0], 8],
            [50, [-4, 0], 4],
            [52, [-4, 0], 4],
        ],
        "rush": [
            [52, [-8, 0], 8],
            [50, [-8, 0], 4],
            [51, [-8, 0], 8],
            [50, [-8, 0], 4],
            [52, [-8, 0], 4],
        ],
        "sit": [[11, [0, 0], 250]],
        "sit_lookup": [[26, [0, 0], 250]],
        "sit_glad": [[30, [0, 0], 250]],
        "sit_sleepy": [
            [26, [0, 0], 5],
            [15, [0, 0], 10],
            [27, [0, 0], 30],
            [15, [0, 0], 10],
            [16, [0, 0], 5],
            [28, [0, 0], 5],
            [17, [0, 0], 5],
            [29, [0, 0], 5],
            [11, [0, 0], 5],
        ],
        "sit_foot": [[31, [0, 0], 250]],
        "sit_foot2": [
            [31, [0, 0], 10],
            [32, [0, 0], 20],
            [31, [0, 0], 10],
            [32, [0, 0], 20],
        ],
        "sleep": [[21, [0, 0], 250]],
        "sleep2": [
            [20, [0, 0], 28],
            [20, [-2, 0], 4],
            [21, [-2, 0], 4],
            [21, [-1, 0], 4],
            [21, [0, 0], 24],
        ],
        "wall_stay": [[14, [0, 0], 250]],
        "wall_moveup": [
            [14, [0, 0], 16],
            [14, [0, -1], 4],
            [12, [0, -1], 4],
            [13, [0, -1], 4],
            [13, [0, 0], 16],
            [13, [0, -2], 4],
            [12, [0, -2], 4],
            [14, [0, -2], 4],
        ],
        "wall_movedown": [
            [14, [0, 0], 16],
            [14, [0, 2], 4],
            [12, [0, 2], 4],
            [13, [0, 2], 4],
            [13, [0, 0], 16],
            [13, [0, 1], 4],
            [12, [0, 1], 4],
            [14, [0, 1], 4],
        ],
        "ceiling_stay": [
            [25, [0, 0], 10],
            [23, [0, 0], 10],
            [24, [0, 0], 30],
            [23, [0, 0], 10],
            [25, [0, 0], 10],
        ],
        "ceiling_move": [
            [25, [-4, 0], 8],
            [23, [-4, 0], 4],
            [24, [-4, 0], 12],
            [23, [-4, 0], 4],
            [25, [-4, 0], 4],
        ],
        // "jump": [[22, [0, 0], 250]], 
        "falling": [[53, [0, 0], 250]],
        "fallen": [
            [18, [0, 0], 10],
            [19, [0, 0], 5],
            [49, [0, 0], 5],
            [19, [0, 0], 5],
            [49, [0, 0], 5],
        ],
        "fallen2": [
            [53, [0, 0], 3],
            [54, [0, 0], 3],
            [53, [0, 0], 3],
            [54, [0, 0], 3],
            [53, [0, 0], 3],
            [54, [0, 0], 3],
            [53, [0, 0], 3],
            [54, [0, 0], 3],
            [18, [0, 0], 10],
            [19, [0, 0], 5],
            [49, [0, 0], 5],
            [19, [0, 0], 5],
            [49, [0, 0], 5],
        ],
        "catch": [
            [9, [0, 0], 5],
            [7, [0, 0], 5],
            [48, [0, 0], 5],
            [8, [0, 0], 5],
            [10, [0, 0], 5],
        ],
        "resist": [
            [5, [0, 0], 5],
            [6, [0, 0], 5],
            [5, [0, 0], 5],
            [6, [0, 0], 5],
            [48, [0, 0], 50],
            [5, [0, 0], 5],
            [6, [0, 0], 5],
            [5, [0, 0], 5],
            [6, [0, 0], 5],
            [5, [0, 0], 5],
            [6, [0, 0], 5],
            [5, [0, 0], 5],
            [6, [0, 0], 5],
            [48, [0, 0], 100],
            [5, [0, 0], 5],
            [6, [0, 0], 5],
            [5, [0, 0], 5],
            [6, [0, 0], 5],
            [5, [0, 0], 5],
            [6, [0, 0], 5],
            [5, [0, 0], 5],
            [6, [0, 0], 5],
            [5, [0, 0], 2],
            [6, [0, 0], 2],
            [5, [0, 0], 2],
            [6, [0, 0], 2],
            [5, [0, 0], 2],
            [6, [0, 0], 2],
            [5, [0, 0], 2],
            [6, [0, 0], 2],
        ]
    }
}